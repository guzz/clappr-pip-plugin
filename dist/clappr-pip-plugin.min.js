!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("@guzzj/clappr-core")):"function"==typeof define&&define.amd?define(["@guzzj/clappr-core"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).PIPPlugin=t(e.Clappr)}(this,(function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,o=n(e);if(t){var c=n(this).constructor;i=Reflect.construct(o,arguments,c)}else i=o.apply(this,arguments);return r(this,i)}}return function(n){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(a,n);var r,c,u,l=o(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=l.call(this,e))._pipSupported=!1,t._currentPlayback=null,t.$el.addClass("media-control-button media-control-icon").css({float:"right",height:"100%"}),t.$el.click((function(){var e=t._playback.el;document.pictureInPictureElement?document.exitPictureInPicture():e.requestPictureInPicture()})),t}return r=a,(c=[{key:"name",get:function(){return"pip-plugin"}},{key:"tagName",get:function(){return"button"}},{key:"template",get:function(){return e.template('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="35px" height="22px" viewBox="0 0 35 22" enable-background="new 0 0 35 22" xml:space="preserve">\n<rect x="0.5" y="0.5" fill="none" stroke="#FFFFFF" stroke-miterlimit="10" width="34" height="21"/>\n<rect x="16.5" y="11.5" fill="#FFFFFF" stroke="#FFFFFF" stroke-miterlimit="10" width="16" height="8"/>\n</svg>\n')}},{key:"attributes",get:function(){return{class:this.name}}},{key:"bindEvents",value:function(){this.listenToOnce(this.core,e.Events.CORE_READY,this.init)}},{key:"_bindEvents",value:function(){this.container=this.core.getCurrentContainer(),this.listenTo(this.core.mediaControl,e.Events.MEDIACONTROL_RENDERED,this._init),this.listenTo(this.core.mediaControl,e.Events.MEDIACONTROL_CONTAINERCHANGED,this._onContainerChanged)}},{key:"_onContainerChanged",value:function(){this._updatePlayback(),this._renderPlugin()}},{key:"_updatePlayback",value:function(e){e=this.core.mediaControl.container.playback,this._playback!==e&&(this._playback=e,this._checkPipSupport())}},{key:"_checkPipSupport",value:function(){var e=this._playback.el;this._pipSupported=e&&"video"===e.nodeName.toLowerCase()&&(document.pictureInPictureEnabled||!e.disablePictureInPicture)}},{key:"init",value:function(){this._bindEvents()}},{key:"_init",value:function(){this._updatePlayback(),this._checkPipSupport(),this.core.mediaControl.$el.find(".media-control-layer .media-control-right-panel .media-control-button[data-fullscreen]").first().after(this.el),this._renderPlugin()}},{key:"_renderPlugin",value:function(){this._pipSupported?this.$el.show():this.$el.hide()}},{key:"render",value:function(){return this.$el.html(this.template()),this}}])&&t(r.prototype,c),u&&t(r,u),a}(e.UICorePlugin)}));
